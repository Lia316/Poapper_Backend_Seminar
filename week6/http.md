# HTTP 학습



## 1. 상태 코드



- ` response.status` 이런 식으로 response 객체에 있는 상태 코드 정보를 확인할 수 있다.



##### 100번대 : Information

- 요청을 처리 중에 있음



##### 200번대 : Success

- 요청을 정상적으로 처리함
- 메시지 body에 리소스를 전송함
- 200 OK : 요청 정상 처리
- 204 No Content : 요청은 정상 처리되었지만, 돌려줄 리소스는 없음



##### 300번대 : Client Error

- 요청을 완료하기 위해 추가 동작이 필요함
- 301 Moved Permanently : 요청한 리소스의 URI가 변경됨
- 302 Found : 요청한 리소스의 URI가 일시적으로 변경됨. 향후 동일한 URI로 요청해야함



##### 400 : Client Error

- 클라이언트 요청을 처리할 수 없음
- 400 Bad Request :  클라이언트의 잘못된 문법으로 서버가 요청을 이해할 수 없음
- 403 Forbidden : 클라이언트는 콘텐츠에 접근할 권리를 가지고 있지 않음
  - Directory Listing 요청 (서버 파일 디렉토리 목록 표시)
  - 관리자 페이지 접근 등을 차단하는 경우 (파일 시스템 허가 거부, 허가 되지 않은 IP 주소에 의한 거부)
- 404 Not Found : 클라이언트가 요청한 리소스가 서버에 없음



##### 500 : Server Error

- 서버에서 처리할 수 없음
- 503 Service Unavailable : 서버가 요청을 처리할 준비가 되지 않음.
  - 서버가 과부하 상태이거나 점검 중일 때
- 504 Gateway Timeout : 서버를 통하는 게이트웨이에 문제가 발생하여 시간이 초과됨





## 2. HTTP 개요



- 정의 : HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 클라이언트-서버 프로토콜
  - 웹에서 이뤄지는 데이터 교환의 기초



#### (1) HTTP 기반 시스템의 구성요소

<img src="https://mdn.mozillademos.org/files/13679/Client-server-chain.png" alt="img" style="zoom:70%;" />

> 클라이언트: 사용자 에이전트

- 사용자를 대신하여 서버에게 요청을 보내고 동작하는 도구로, 주로 브라우저가 담당한다
- 브라우저는 서버가 될 수 없다
- 웹 페이지를 표시하기 위한 요청을 전송하고, 분석하여 리소스와 레이아웃에 대응하는 요청을 받아 웹 페이지를 갱신한다
- 웹 페이지는 하이퍼텍스트 문서이다
- 브라우저는 http 요청 및 응답을 통해 사용자에게 반응한다



> 웹 서버

- 클라이언트의 요청에 응답한다
- 여러 개의 서버를 동일한 머신 위에서 호스팅 할 수도 있다



> 프록시

- 웹 브라우저와 서버 사이에 주고받는 웹 스텍 구조에서도 애플레케이션 계층에서 동작한다

- 프록시를 통해 요청이 변경되거나 변경되지 않는 경우 눈에 보이지 않을 수 있다

- 다양한 기능을 수행한다

  - 캐싱 (캐시는 공개 또는 비공개가 될 수 있습니다 (예: 브라우저 캐시))

  - 필터링 (바이러스 백신 스캔, 유해 컨텐츠 차단(자녀 보호) 기능)

  - 로드 밸런싱 (여러 서버들이 서로 다른 요청을 처리하도록 허용)

  - 인증 (다양한 리소스에 대한 접근 제어)

  - 로깅 (이력 정보를 저장)






#### (2) HTTP 메시지

HTTP 메시지의 타입 : 요청(requests)과 응답(responses)의 형식



> 요청

HTTP 요청의 예:

<img src="https://mdn.mozillademos.org/files/13687/HTTP_Request.png" alt="A basic HTTP request" style="zoom:60%;" /> 

- 요청의 구성 요소

  - HTTP 메서드

  - 가져오려는 리소스의 경로

  - HTTP 프로토콜의 버전

  - 선택적 헤더들 - 서버에 대한 추가 정보를 전달함

  - 전송된 리소스를 포함하는 응답의 본문과 유사한 본문 - `POST` 같은 메소드를 위함




> 응답

응답의 예:

<img src="https://mdn.mozillademos.org/files/13691/HTTP_Response.png" alt="img" style="zoom:60%;" /> 

- 응답의 구성 요소

  - HTTP 프로토콜의 버전

  - 요청의 성공 여부와, 그 이유를 나타내는 상태 코드

  - 상태 코드의 짧은 설명을 나타내는 상태 메시지

  - HTTP 헤더 (요청 헤더와 비슷함)

  - 가져온 리소스가 포함되는 본문 (optional)